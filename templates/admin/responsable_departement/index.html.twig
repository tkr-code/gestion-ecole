{% extends 'admin/base.html.twig' %} 
{% import "macros/links.html.twig" as links %} 
{% import "macros/dataTable.html.twig" as dataTable %}
{% import "macros/alertes.html.twig" as alertes %}
{% import "macros/etats.html.twig" as etats %}
{% block title %} Responsable Departement {% endblock %} 
{% block head %} {{ dataTable.css() }} {% endblock %}
{% block foot %} {{ dataTable.js() }} {% endblock %} 
{% block javascripts %} {{ dataTable.script('#table-1') }} {% endblock %} 
{% block body %} 
{% for message in app.flashes('success') %} 
{{ alertes.alert(message,'success')}} 
{% endfor %}
<div class="card card-outline card-primary">
    <div class="card-header">
        <h3>
            Responsable Departement
        </h3>
    </div>

    <div class="card-body">
        <div class="row mb-3">
            <div class="col">
                {{ links.new(path('admin_responsable_departement_new')) }}
            </div>
        </div>
        
        <table id="table-1" class="table">
            <thead>
                <tr>
                    <th>
                        Responsable
                    
                    </th>
                    <th>
                        Departement
                    </th>

                    <th>
                        Date
                    </th>
                    <th>
                        Etat
                    </th>
                    <th>
                        actions
                    </th>

                </tr>
            </thead>
            <tbody>
                
                {% for responsable_departement in responsable_departements %}
                
                <tr>
                    <td>
                        {{ responsable_departement.personne.fullName }}
                    </td>
                    <td>
                        {{ responsable_departement.responsable.departement.designation }}
                    </td>
                    <td>
                    <b> Date entree </b>: 
                            {{ responsable_departement.responsable.dateEntreFonction ? responsable_departement.responsable.dateEntreFonction|date_format_fr : '' }}
                        <br>
                        
                        <b>Date sortie </b>:
                        {% if responsable_departement.responsable.dateSortieFonction | length != 0 %} {{ responsable_departement.responsable.dateSortieFonction ? responsable_departement.responsable.dateSortieFonction|date_format_fr : '' }} {% else %} Toujours en Fonction {% endif %}
                    </td>
                    <td>
                        {{etats.etat(responsable_departement.etat)}}
                    </td>
                    <td>
                        {{ links.show(path('user_show', {'id': responsable_departement.id})) }} {{ links.edit(path('admin_responsable_departement_edit', {'id': responsable_departement.id})) }}
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4">
                        no records found
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}